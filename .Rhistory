.libPaths( c( "/shared-nfs/SH/code/Rlib" , .libPaths() ) )
if (!require("pacman")) install.packages("pacman", lib = "/shared-nfs/SH/code/Rlib")
if (!require("BiocManager")) install.packages("BiocManager", lib = "/shared-nfs/SH/code/Rlib")
pacman::p_load(
"tidyverse",
"furrr",
"data.table",
"tictoc",
"optparse",
"multidplyr",
"microbenchmark"
)
pacman::p_load(
"tidyverse",
"furrr",
"tictoc",
"gganimate",
"Rtsne",
"dbscan",
"glue",
"h2o",
"multidplyr"
)
MGM1 <- readRDS("/shared-nfs/SH/nanodisco/MGM1/dataset/methylation_profile_MGM1_motif.RDS")
View(MGM1)
MGM1_subset <- MGM1[1:10000,]
MGM1_subset %>%
mutate(feature_name = paste0(motif, "_", distance_motif))
MGM1_subset %>%
mutate(feature_name = paste0(motif, "_", distance_motif)) %>%
pivot_wider(names_from = feature_name, values_from = dist_score)
MGM1_wide <- MGM1_subset %>%
mutate(feature_name = paste0(motif, "_", distance_motif)) %>%
pivot_wider(names_from = feature_name, values_from = dist_score)
View(MGM1_wide)
MGM1_wide <- MGM1_subset %>%
mutate(feature_name = paste0(motif, "_", distance_motif)) %>%
select(feature_name, dist_score) %>%
pivot_wider(names_from = feature_name, values_from = dist_score)
View(MGM1_wide)
MGM1_wide <- MGM1_subset %>%
mutate(feature_name = paste0(motif, "_", distance_motif)) %>%
select(feature_name, dist_score, contig) %>%
pivot_wider(names_from = feature_name, values_from = dist_score)
View(MGM1_wide)
MGM1_wide %>%
mutate(
dist_score = ifelse(is.na(dist_score), mean(dist_score), dist_score)
)
View(MGM1_wide)
test <- c(1, 4, NA)
ifelse(is.na(test), mean(test), test)
ifelse(is.na(test), mean(test, na.rm= TRUE), test)
ifelse(is.na(test), mean(test, na.rm = TRUE), test)
ifelse(is.na(test), mean(test, na.rm = TRUE), test)
MGM1_wide %>%
apply(MARGIN = 2, function(x) ifelse(is.na(x), mean(x, na.rm = TRUE), x))
MGM1_wide %>%
base::apply(MARGIN = 2, function(x) ifelse(is.na(x), mean(x, na.rm = TRUE), x))
MGM1_wide %>%
base::apply(MARGIN = 2, function(x) ifelse(is.na(x), mean(x, na.rm = TRUE), x))
MGM1_wide %>%
select(-contig) %>%
base::apply(MARGIN = 2, function(x) ifelse(is.na(x), mean(x, na.rm = TRUE), x))
MGM1_wide %>%
select(-contig) %>%
base::apply(MARGIN = 2, function(x) if((is.na(x)){mean(x, na.rm = TRUE)} else{x}))
MGM1_wide %>%
select(-contig) %>%
base::apply(MARGIN = 2, function(x) if(is.na(x)){mean(x, na.rm = TRUE)} else{x}))
MGM1_wide %>%
select(-contig) %>%
base::apply(MARGIN = 2, function(x) if(is.na(x)){mean(x, na.rm = TRUE)} else{x})
if(is.na(x)){mean(x, na.rm = TRUE)} else {test}
if(is.na(test)){mean(x, na.rm = TRUE)} else {test}
if(is.na(test)){mean(test, na.rm = TRUE)} else {test}
MGM1_wide %>%
select(-contig) %>%
base::apply(MARGIN = 2, function(x) {
map_dbl(x, function(y){
if(is.na(y)){mean(x, na.rm = TRUE)} else {y}
})
}
)
pacman::p_load(
"tidyverse",
"furrr",
"data.table",
"tictoc",
"optparse",
"multidplyr",
"microbenchmark"
)
microbenchmark(
MGM1_wide %>%
select(-contig) %>%
base::apply(MARGIN = 2, function(x) ifelse(is.na(x), mean(x, na.rm = TRUE), x))
)
library(microbenchmark)
install.packages("microbenchmark")
install.packages("microbenchmark")
install.packages("microbenchmark")
.libPaths( c( "/shared-nfs/SH/code/Rlib" , .libPaths() ) )
.libPaths( c( "/shared-nfs/SH/code/Rlib" , .libPaths() ) )
.libPaths
.libPaths()
install.packages("microbenchmark", lib="/user/student.aau.dk/sheide17/R/x86_64-pc-linux-gnu-library/3.6")
pacman::p_load(
"tidyverse",
"furrr",
"tictoc",
"gganimate",
"Rtsne",
"dbscan",
"glue",
"h2o",
"multidplyr",
"tictoc"
)
MGM1 <- readRDS("/shared-nfs/SH/nanodisco/MGM1/dataset/methylation_profile_MGM1_motif.RDS")
MGM1_subset <- MGM1[1:10000,]
MGM1_wide <- MGM1_subset %>%
mutate(feature_name = paste0(motif, "_", distance_motif)) %>%
select(feature_name, dist_score, contig) %>%
pivot_wider(names_from = feature_name, values_from = dist_score)
tic()
MGM1_wide %>%
select(-contig) %>%
base::apply(MARGIN = 2, function(x) ifelse(is.na(x), mean(x, na.rm = TRUE), x))
)
toc()
tic()
MGM1_wide %>%
select(-contig) %>%
base::apply(MARGIN = 2, function(x) ifelse(is.na(x), mean(x, na.rm = TRUE), x))
)
toc()
tic()
MGM1_wide %>%
select(-contig) %>%
base::apply(MARGIN = 2, function(x) ifelse(is.na(x), mean(x, na.rm = TRUE), x))
)
toc()
tic()
MGM1_wide %>%
select(-contig) %>%
base::apply(MARGIN = 2, function(x) {
map_dbl(x, function(y){
if(is.na(y)){mean(x, na.rm = TRUE)} else {y}
})
})
toc()
tic()
MGM1_wide %>%
select(-contig) %>%
base::apply(MARGIN = 2, function(x) {
map_dbl(x, function(y){
if(is.na(y)){mean(x, na.rm = TRUE)} else {y}
})
})
toc()
tic()
MGM1_wide %>%
select(-contig) %>%
base::apply(MARGIN = 2, function(x) {
map_dbl(x, function(y){
if(is.na(y)){mean(x, na.rm = TRUE)} else {y}
})
})
toc()
tic()
asd <- MGM1_wide %>%
mutate(
dist_score = ifelse(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
tic()
asd <- MGM1_wide %>%
mutate(
dist_score = ifelse(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
View(MGM1_wide)
tic()
asd <- MGM1_wide %>%
select(-contig) %>%
mutate(
dist_score = ifelse(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
tic()
asd <- MGM1_wide %>%
select(-contig) %>%
mutate(
dist_score = ifelse(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
tic()
asd <- MGM1_wide %>%
select(-contig) %>%
mutate(
dist_score = ifelse(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
tic()
asd <- MGM1_wide %>%
select(-contig) %>%
mutate(
dist_score = if_else(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
tic()
asd <- MGM1_wide %>%
select(-contig) %>%
mutate(
dist_score = if_else(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
MGM1_subset <- MGM1[1:100000,]
MGM1_wide <- MGM1_subset %>%
mutate(feature_name = paste0(motif, "_", distance_motif)) %>%
select(feature_name, dist_score, contig) %>%
pivot_wider(names_from = feature_name, values_from = dist_score)
tic()
asd <- MGM1_wide %>%
select(-contig) %>%
mutate(
dist_score = if_else(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
tic()
asd <- MGM1_wide %>%
select(-contig) %>%
mutate(
dist_score = if_else(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
tic()
asd <- MGM1_wide %>%
select(-contig) %>%
mutate(
dist_score = if_else(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
MGM1_wide <- MGM1 %>%
mutate(feature_name = paste0(motif, "_", distance_motif)) %>%
select(feature_name, dist_score, contig) %>%
pivot_wider(names_from = feature_name, values_from = dist_score)
tic()
asd <- MGM1_wide %>%
select(-contig) %>%
mutate(
dist_score = if_else(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
tic()
asd <- MGM1_wide %>%
select(-contig) %>%
mutate(
dist_score = ifelse(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
tic()
asd <- MGM1_wide %>%
select(-contig) %>%
mutate(
dist_score = ifelse(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
MGM1_wide <- MGM1 %>%
mutate(feature_name = paste0(motif, "_", distance_motif)) %>%
select(feature_name, dist_score, contig) %>%
pivot_wider(names_from = feature_name, values_from = dist_score) %>%
pivot_longer(cols = -contig)
View(MGM1_wide)
tic()
asd <- MGM1_na %>%
select(-contig) %>%
mutate(
dist_score = ifelse(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
tic()
asd <- MGM1_na %>%
select(-contig) %>%
mutate(
dist_score = ifelse(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
tic()
asd <- MGM1_na %>%
select(-contig) %>%
mutate(
dist_score = ifelse(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
tic()
asd <- MGM1_na %>%
select(-contig) %>%
mutate(
dist_score = ifelse(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
MGM1_na <- MGM1 %>%
mutate(feature_name = paste0(motif, "_", distance_motif)) %>%
select(feature_name, dist_score, contig) %>%
pivot_wider(names_from = feature_name, values_from = dist_score) %>%
pivot_longer(cols = -contig)
tic()
asd <- MGM1_na %>%
select(-contig) %>%
mutate(
dist_score = ifelse(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
tic()
asd <- MGM1_na %>%
select(-contig) %>%
mutate(
dist_score = ifelse(is.na(dist_score), mean(dist_score), dist_score)
)
toc()
tic()
asd <- MGM1_na %>%
select(-contig) %>%
mutate(
dist_score = ifelse(is.na(value), mean(value), value)
)
toc()
tic()
asd <- MGM1_na %>%
select(-contig) %>%
mutate(
value = ifelse(is.na(value), mean(value), value)
)
toc()
tic()
asd <- MGM1_na %>%
select(-contig) %>%
mutate(
value = ifelse(is.na(value), mean(value), value)
)
toc()
tic()
asd <- MGM1_na %>%
select(-contig) %>%
mutate(
value = ifelse(is.na(value), mean(value), value)
)
toc()
tic()
asd <- MGM1_na %>%
select(-contig) %>%
mutate(
value = if_else(is.na(value), mean(value), value)
)
toc()
tic()
asd <- MGM1_na %>%
select(-contig) %>%
mutate(
value = if_else(is.na(value), mean(value), value)
)
toc()
tic()
asd <- MGM1_na %>%
select(-contig) %>%
mutate(
value = if_else(is.na(value), mean(value), value)
)
toc()
tic()
asd <- MGM1_na %>%
select(-contig) %>%
mutate(
value = if_else(is.na(value), mean(value), value)
)
toc()
tic()
asd <- MGM1_na %>%
select(-contig) %>%
mutate(
value = if_else(is.na(value), mean(value), value)
)
toc()
